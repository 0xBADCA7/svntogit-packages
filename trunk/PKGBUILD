# $Id$
# Maintainer: Andreas Radke <andyrtr@archlinux.org>
# Contributor: Tobias Kieslich <tobias (at) archlinux.org>

pkgname=orage
pkgver=4.7.5
pkgrel=1
pkgdesc="A simple calendar application with reminders for Xfce"
arch=('i686' 'x86_64')
license=('GPL2')
url="http://www.xfce.org/projects/orage/"
groups=('xfce4-goodies')
depends=('xfce4-panel' 'libxfcegui4' 'libnotify' 'hicolor-icon-theme') # 'libical' 
makedepends=('intltool' 'xfce4-dev-tools' 'popt')
options=('!libtool') # '!makeflags')
replaces=('xfcalendar')
install=${pkgname}.install
source=(http://www.kolumbus.fi/~w408237/orage/${pkgname}-${pkgver}.tar.bz2
	orage-4.7.5.16-libnotify.patch
	gitfixes.diff
	#http://www.xfce.org/archive/xfce-${pkgver}/src/${pkgname}-${pkgver}.tar.bz2
)
md5sums=('3880e9beb80b29b042d2d7e91ab2ccf1'
         '762968e57d077df4df662714c7ff2070'
         '4db1954a7ad3d18db6e6464f04620516')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  
  # see http://pkgs.fedoraproject.org/gitweb/?p=orage.git;a=tree;h=refs/heads/master;hb=master
#  patch -Np1 -i $srcdir/orage-4.7.5.16-libnotify.patch
  patch -Np1 -i $srcdir/gitfixes.diff
#  export CFLAGS="$CFLAGS -I/usr/include/libical"
#  ./configure --prefix=/usr \
  ./autogen.sh --prefix=/usr \
	--sysconfdir=/etc \
	--libexecdir=/usr/lib \
	--localstatedir=/var \
	--disable-static \
	--disable-debug 
	#	--enable-libical \
  make
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}
  make -j1 DESTDIR=${pkgdir} install
}
